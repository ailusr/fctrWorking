##**THIS IS THE LAST WORKING REPOSITORY OF CODE__USE THIS FOR REFERENCE TO FIGURE OUT WHAT BROKE IN THE NEWER VERSION OF THE CODE!**##

# fctr â€“ Fact Checking & Source Verification Extension

<div align="center">

![fctr Logo](icons/icon128.png)

**Instantly fact-check and trace sources for any text on the web**

[![Version](https://img.shields.io/badge/version-2.5.0-blue.svg)](https://github.com/your-org/fctr-extension)
[![Chrome Web Store](https://img.shields.io/badge/Chrome%20Web%20Store-Available-green.svg)](#)
[![License](https://img.shields.io/badge/license-GPL%20v3-blue.svg)](LICENSE)
[![Manifest](https://img.shields.io/badge/manifest-v3-orange.svg)](#)

</div>

## ğŸ¯ What is fctr?

**fctr** (pronounced "factor") is a Chrome extension that provides instant fact-checking and source verification for any text you encounter on the web. Simply highlight text, right-click, and get AI-powered analysis with credible sources in seconds.

### âš¡ Key Features

- **ğŸ” Instant Fact Checking** - Right-click any text for immediate verification
- **ğŸ“š Source Tracing** - Identify primary sources and reliability indicators  
- **ğŸ” Secure OAuth Login** - GitHub SSO integration via Keycloak
- **ğŸ¯ Smart Search** - Integrated search across Google, DuckDuckGo, Brave, Perplexity, and AI tools
- **ğŸ“± Draggable Interface** - Repositionable popup that remembers your preferences
- **ğŸ“„ Export & Print** - Save reports as HTML or print directly
- **âš¡ Native Performance** - Zero external dependencies, pure browser APIs

## ğŸš€ Quick Start

### Installation

1. **Chrome Web Store** (Recommended)
   ```
   Visit: chrome://extensions/ â†’ Search "fctr" â†’ Install
   ```

2. **Developer Mode** (For testing)
   ```bash
   git clone https://github.com/your-org/fctr-extension
   cd fctr-extension
   # Load unpacked in chrome://extensions/
   ```

### First Use

1. **Click the fctr icon** in your Chrome toolbar
2. **Login with SSO** - Connect via GitHub (first-time users get 25 free credits)
3. **Start fact-checking** - Right-click any text â†’ "fact check with fctr"

## ğŸ“– Usage Guide

### Fact Checking Text

**Method 1: Context Menu**
1. Highlight any text on a webpage
2. Right-click â†’ **"fact check with fctr"**
3. View detailed analysis in the popup modal

**Method 2: Keyboard Shortcut**
1. Highlight text
2. Press **Ctrl+Shift+Y** (Cmd+Shift+Y on Mac)
3. Get instant fact-check results

**Method 3: Source Tracing**
1. Highlight text
2. Right-click â†’ **"source trace with fctr"**
3. See source reliability and citation analysis

### Search Integration

The fctr popup includes smart search functionality:

- **Integrated Providers**: Google, DuckDuckGo, Brave Search, Perplexity.ai
- **AI Tools**: OpenAI ChatGPT, Claude
- **Context Aware**: Searches open with your fact-check query pre-filled
- **Provider Memory**: Remembers your preferred search engine

### Interface Features

- **ğŸ¯ Draggable Popup** - Click and drag the header to reposition
- **ğŸ’¾ Position Memory** - Popup remembers where you placed it
- **ğŸ“± Responsive Design** - Works on any screen size
- **ğŸ¨ Native Styling** - Matches your system's look and feel

## ğŸ”§ Technical Details

### Architecture

- **Manifest V3** - Modern Chrome extension standard
- **Modular JavaScript** - Clean, maintainable codebase
- **Native APIs** - No external dependencies
- **OAuth 2.0 + PKCE** - Secure authentication flow
- **Chrome Storage API** - Encrypted credential storage

### File Structure

```
fctr-extension/
â”œâ”€â”€ manifest.json           # Extension configuration
â”œâ”€â”€ background.js           # Service worker
â”œâ”€â”€ content-script.js       # Page interaction
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ auth-manager.js     # Authentication logic
â”‚   â”œâ”€â”€ auth-popup-ui.js    # Popup interface
â”‚   â”œâ”€â”€ results-display.js  # Results modal
â”‚   â”œâ”€â”€ native-utils.js     # Browser API utilities
â”‚   â””â”€â”€ utils.js           # Shared utilities
â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ auth-popup.html     # Standalone auth page
â”‚   â”œâ”€â”€ callback.html       # OAuth callback
â”‚   â””â”€â”€ keycloak-config.js  # SSO configuration
â””â”€â”€ icons/                  # Extension icons
```

### API Integration

- **Authentication**: `https://usw2.auth.ac/auth` (Keycloak)
- **Fact Checking**: `https://api.totmailabs.com:5001/api/v1/fact_checking`
- **Source Checking**: `https://api.totmailabs.com:5001/api/v1/source_checking`

### Browser Permissions

```json
{
  "permissions": [
    "storage",      // Save user preferences
    "activeTab",    // Access current page content
    "identity",     // OAuth authentication
    "contextMenus", // Right-click menu items
    "downloads",    // Export HTML reports
    "notifications" // Credit warnings
  ]
}
```

## ğŸ› ï¸ Development

### Prerequisites

- **Chrome Browser** (v88+)
- **Node.js** (v16+) - For development tools
- **Git** - Version control

### Setup

```bash
# Clone repository
git clone https://github.com/your-org/fctr-extension
cd fctr-extension

# Load extension in Chrome
# 1. Open chrome://extensions/
# 2. Enable "Developer mode"
# 3. Click "Load unpacked"
# 4. Select the fctr-extension folder
```

### Development Workflow

```bash
# Make changes to source files
# Extension auto-reloads in Chrome

# Test authentication
# 1. Click fctr icon â†’ Login with SSO
# 2. Verify OAuth flow completes

# Test fact-checking
# 1. Highlight text on any webpage
# 2. Right-click â†’ "fact check with fctr"
# 3. Verify results display correctly
```

### Module System

The extension uses a modular architecture:

```javascript
// modules/auth-manager.js
class AuthManager {
  constructor() { /* Authentication logic */ }
}

// modules/results-display.js  
class ResultsDisplay {
  showResult(content, claim) { /* Display results */ }
}

// All modules register globally
window.FCTR = { modules: {} };
window.FCTR.modules.AuthManager = AuthManager;
```

## ğŸ”’ Privacy & Security

### Data Collection

fctr collects minimal data to provide fact-checking services:

- **Account Info**: Email address (from GitHub OAuth)
- **Usage Data**: Text submitted for fact-checking + source URLs
- **Technical Data**: Basic browser/extension analytics

### Data Protection

- **Encrypted Storage**: All credentials stored via Chrome's encrypted storage
- **OAuth 2.0 + PKCE**: Industry-standard secure authentication
- **HTTPS Only**: All API communication encrypted in transit
- **No Tracking**: No user behavior tracking or analytics

### Your Rights

- **Access**: View your account data anytime
- **Deletion**: Delete your account and all associated data
- **Portability**: Export your data in standard formats

## ğŸ“Š Version History

### v2.5.0 (Current)
- âœ… **Performance**: Removed legacy PDF libraries, 100% native APIs
- âœ… **Architecture**: Cleaned up unused fonts and CSS dependencies  
- âœ… **UI/UX**: Improved popup positioning and drag functionality
- âœ… **Stability**: Enhanced error handling and connection resilience

### v2.3.0 
- âœ… **Branding**: Unified color scheme and modern design
- âœ… **Search**: Multi-provider search integration
- âœ… **Export**: Native HTML export and print functionality

### v2.0.0
- âœ… **Authentication**: OAuth 2.0 + GitHub SSO integration
- âœ… **Manifest V3**: Modern Chrome extension architecture
- âœ… **Modular Design**: Clean, maintainable codebase

## ğŸ¤ Contributing

We welcome contributions! Please see our [Contributing Guide](CONTRIBUTING.md) for details.

### Quick Links

- **ğŸ› Report Bugs**: [GitHub Issues](https://github.com/your-org/fctr-extension/issues)
- **ğŸ’¡ Feature Requests**: [GitHub Discussions](https://github.com/your-org/fctr-extension/discussions)
- **ğŸ“§ Contact**: [support@totmailabs.com](mailto:support@totmailabs.com)

## ğŸ“„ License

This project is licensed under the GNU General Public License v3.0 - see the [LICENSE](LICENSE) file for details.

## ğŸ¢ About TOTMai Labs

fctr is developed by [TOTMai Labs](https://totmailabs.com), dedicated to building AI tools that promote information literacy and critical thinking.

---

<div align="center">

**Made with â¤ï¸ by TOTMai Labs**

[Website](https://totmailabs.com) â€¢ [Privacy Policy](https://totmailabs.com/privacy) â€¢ [Terms of Service](https://totmailabs.com/terms)

</div>
